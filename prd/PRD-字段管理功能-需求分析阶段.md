# 需求文档（Product Requirements Document）

## 1. 概述
- **名称**：甘特图字段管理功能
- **定位**：为甘特图用户提供灵活的表格字段配置和布局调整能力，提升个性化使用体验
- **目标用户**：项目经理、产品经理、开发团队等所有甘特图使用者
- **核心问题**：现有甘特图表格字段固定，无法根据项目需求和个人习惯进行个性化配置

## 2. 市场调研
基于现有甘特图工具分析，字段管理功能已成为现代项目管理工具的标准配置：
- **Microsoft Project**：支持自定义字段和列排序
- **Asana**：提供灵活的字段配置和视图定制
- **Monday.com**：强大的自定义字段和布局调整功能
- **技术可行性**：基于DHTMLX Gantt的API完全支持动态字段配置

## 3. 页面架构
### 3.1 页面清单
| 页面名称 | 页面类型 | 核心功能 | 用户价值 | 用户入口 | 优先级 |
|:--------:|:--------:|:--------:|:--------:|:--------:|:--------:|
| 字段配置弹窗 | 功能页 | 自定义字段创建和编辑 | 满足个性化字段需求 | 新增按钮点击 | P0 |
| 字段排序界面 | 功能页 | 拖拽调整字段顺序 | 优化表格显示顺序 | 表格头部拖拽 | P0 |
| 布局调整界面 | 功能页 | 调整表格甘特图比例 | 优化工作空间布局 | 分割线拖拽 | P1 |
| 配置管理界面 | 功能页 | 导入导出字段配置 | 团队配置共享 | 设置菜单 | P2 |

### 3.2 页面详细需求
#### 页面：字段配置弹窗
- **页面目标**：让用户能够创建和编辑自定义字段
- **核心功能**：字段类型选择、字段属性配置、选项值设置
- **业务逻辑**：支持文本、下拉选择（单选/多选）、数值三种字段类型
- **页面元素**：字段名称输入、字段类型选择器、选项配置区、保存/取消按钮
- **交互逻辑**：选择字段类型→配置字段属性→设置选项值→保存配置
- **跳转逻辑**：保存后关闭弹窗，新字段自动添加到表格

#### 页面：字段排序界面
- **页面目标**：让用户能够调整表格字段的显示顺序
- **核心功能**：拖拽排序、实时预览、排序保存
- **业务逻辑**：支持所有字段（系统字段+自定义字段）的拖拽排序
- **页面元素**：可拖拽的字段列表、排序预览区、保存按钮
- **交互逻辑**：拖拽字段→实时更新顺序→确认保存
- **跳转逻辑**：保存后更新表格显示，无需页面跳转

#### 页面：布局调整界面
- **页面目标**：让用户能够调整表格和甘特图的比例
- **核心功能**：拖拽分割线、比例实时调整、布局保存
- **业务逻辑**：支持自由拖拽调整，最小宽度限制
- **页面元素**：可拖拽的分割线、比例指示器、重置按钮
- **交互逻辑**：拖拽分割线→实时调整比例→自动保存
- **跳转逻辑**：调整后立即生效，无需页面跳转

#### 页面：配置管理界面
- **页面目标**：让用户能够导入导出字段配置
- **核心功能**：配置导出、配置导入、配置预览
- **业务逻辑**：支持JSON格式的配置导入导出
- **页面元素**：导出按钮、导入按钮、配置预览区、历史版本列表
- **交互逻辑**：选择操作→确认执行→结果反馈
- **跳转逻辑**：导入后自动应用配置，无需页面跳转

## 4. 用户故事
### P0核心功能：
- 作为项目经理，我希望能够拖拽调整表格字段顺序，以便按照我的工作习惯组织信息显示
- 业务规则：支持所有字段的拖拽排序，排序结果实时保存

- 作为产品经理，我希望能够添加自定义字段（如优先级、负责人、标签等），以便更好地管理项目信息
- 业务规则：支持文本、下拉选择、数值三种字段类型，字段配置支持选项值设置

### P1重要功能：
- 作为开发团队，我希望能够调整表格和甘特图的比例，以便根据任务复杂度优化工作空间布局
- 业务规则：支持自由拖拽调整，设置最小宽度限制防止界面过小

### P2扩展功能：
- 作为团队负责人，我希望能够导出字段配置并分享给团队成员，以便统一团队的工作标准
- 业务规则：支持JSON格式的配置导入导出，包含字段定义和排序信息

## 5. 用户流程
### 主要操作路径：
1. 用户进入甘特图 → 2. 点击新增字段按钮 → 3. 配置字段属性 → 4. 保存并应用
1. 用户进入甘特图 → 2. 拖拽字段标题 → 3. 调整字段顺序 → 4. 自动保存
1. 用户进入甘特图 → 2. 拖拽分割线 → 3. 调整布局比例 → 4. 实时生效

### 页面流转图：
甘特图主界面 → 字段配置弹窗 → 配置完成 → 返回主界面
甘特图主界面 → 拖拽排序 → 排序完成 → 主界面更新
甘特图主界面 → 布局调整 → 调整完成 → 主界面更新

## 6. 约束
- **平台要求**：基于现有HTML5+CSS3+JavaScript技术栈，兼容现代浏览器
- **功能边界**：仅支持表格字段管理，不涉及甘特图核心功能修改
- **内容规范**：字段名称限制50字符，选项值限制100个，数值字段支持整数和小数
- **技术约束**：基于DHTMLX Gantt API实现，保持与现有代码的兼容性
- **性能要求**：字段配置变更响应时间<200ms，拖拽操作流畅度>60fps
- **数据安全**：配置数据本地存储，支持备份和恢复
