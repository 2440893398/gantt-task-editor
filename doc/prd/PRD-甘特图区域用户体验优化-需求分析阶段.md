# 甘特图区域用户体验优化报告

## 1. 概述

- **名称**：甘特图区域 UX 优化
- **定位**：提升甘特图时间轴区域的用户操作便捷性和视觉体验
- **目标用户**：需要管理多任务、长周期项目的产品经理、项目经理和团队成员
- **核心问题**：当前甘特图区域在处理大时间跨度项目时，缺乏灵活的视图控制能力，影响用户效率

---

## 2. 当前功能分析

### 2.1 已有功能 ✅

| 功能 | 实现情况 | 说明 |
|:----:|:--------:|:----:|
| 表格/甘特图分隔线拖拽 | ✅ 已实现 | 支持拖拽调整左右宽度，宽度自动保存到 localStorage |
| 批量选择任务 | ✅ 已实现 | 支持 Ctrl+点击多选，复选框单选 |
| 任务依赖线 | ✅ 已实现 | 任务间有虚线箭头表示依赖关系 |
| 进度显示 | ✅ 已实现 | 绿色表示已完成，红色表示未完成/逾期 |
| 时间刻度 | ✅ 已实现 | 显示月+日双层刻度，周末高亮 |
| 工具栏按钮 | ✅ 已实现 | 编辑字段、编辑模式、导入导出 |

### 2.2 功能缺失 ❌

| 功能 | 状态 | 用户痛点 |
|:----:|:----:|:--------:|
| 独立缩放 | ❌ 缺失 | 时间跨度大时，任务条过小难以查看 |
| 拖拽平移 | ❌ 缺失 | 只能依赖滚动条，操作不便 |
| 快速定位 | ❌ 缺失 | 无法快速跳转到今天或特定日期 |
| 视图切换 | ❌ 缺失 | 无法切换日/周/月视图 |
| 任务拖拽调整 | ❌ 缺失 | 无法直接拖拽任务条修改日期 |

---

## 3. 优化建议

### 🔴 P0 - 核心体验问题

#### 3.1 甘特图区域独立缩放

**问题描述**：
当项目时间跨度较大（如几个月甚至一年）时，任务条会被压缩得非常窄，难以查看任务名称和进度信息。

**优化方案**：
1. **缩放控件**：在甘特图区域右下角添加缩放滑块和 +/- 按钮
2. **快捷操作**：支持 Ctrl + 鼠标滚轮缩放
3. **缩放级别**：支持日/周/月/季度/年多级缩放

**界面建议**：
```
┌──────────────────────────────────────────────────┐
│                    甘特图区域                     │
│                                                  │
│                                                  │
│                    ［ － ］━━━◉━━━［ ＋ ］        │
│                          100%                    │
└──────────────────────────────────────────────────┘
```

**用户价值**：
- 大时间跨度项目可快速缩小查看全景
- 短时间段可放大查看详细信息
- 提升操作效率 30%+

---

#### 3.2 甘特图区域拖拽平移

**问题描述**：
目前只能通过底部滚动条移动视图，当甘特图区域较大时，精确定位困难。

**优化方案**：
1. **拖拽模式**：鼠标左键按住空白区域即可拖拽平移
2. **惯性滚动**：松开后有轻微惯性效果，操作更流畅
3. **边界反馈**：到达边界时有弹性反馈

**交互逻辑**：
- 鼠标悬停在任务条上 → 显示详情 Tooltip
- 鼠标按住任务条 → 进入任务拖拽模式（调整日期）
- 鼠标按住空白区域 → 进入视图拖拽模式

**用户价值**：
- 更直观的导航体验
- 减少对滚动条的依赖
- 符合现代 Web 应用交互习惯

---

### 🟡 P1 - 重要优化项

#### 3.3 "回到今天" 快捷按钮

**问题描述**：
浏览历史或未来任务后，需要手动滚动很长距离才能回到当前日期。

**优化方案**：
在工具栏添加「📅 今天」按钮，点击后自动滚动到当前日期居中位置。

**按钮位置**：
```
┌─────────────────────────────────────────────────────────────┐
│  编辑字段  │  编辑模式  │  📅 今天  │  导出  │  导入       │
└─────────────────────────────────────────────────────────────┘
```

---

#### 3.4 视图切换（日/周/月）

**问题描述**：
不同场景需要不同粒度的视图：
- 日常工作需要「日视图」查看详细任务
- 周会需要「周视图」汇报进展
- 管理层需要「月视图」把控全局

**优化方案**：
```
┌──────────────────────────────────────┐
│   日  │  周  │  月  │  季度  │  年  │
└──────────────────────────────────────┘
```

**视图切换逻辑**：
| 视图 | 时间刻度 | 适用场景 |
|:----:|:--------:|:--------:|
| 日视图 | 小时 | 短期任务详情 |
| 周视图 | 日 | 周计划查看 |
| 月视图 | 日 | 月度项目管理 |
| 季度视图 | 周 | 季度规划 |
| 年视图 | 月 | 年度项目总览 |

---

#### 3.5 迷你地图/概览条

**问题描述**：
当前没有全局视野，用户不知道自己在整个项目时间线中的位置。

**优化方案**：
在甘特图底部添加迷你地图，显示完整项目周期的缩略图，并用高亮框标识当前视图范围。

```
┌──────────────────────────────────────────────────────────────┐
│  ████████████████████████████████████████████████████████    │
│        ↑                                                     │
│      当前视图位置                                             │
└──────────────────────────────────────────────────────────────┘
```

**交互**：点击迷你地图可快速跳转到对应时间段。

---

### 🟢 P2 - 体验增强项

#### 3.6 任务条悬停详情 Tooltip

**当前问题**：悬停任务条时无信息显示。

**优化方案**：
鼠标悬停时显示浮窗，包含：
- 任务名称
- 开始/结束日期
- 负责人
- 进度百分比
- 优先级

```
┌───────────────────────────┐
│  📋 网站首页开发          │
│  ────────────────────────  │
│  📅 2026-01-05 → 01-15    │
│  👤 负责人：小张          │
│  📊 进度：45%             │
│  🔥 优先级：高            │
└───────────────────────────┘
```

---

#### 3.7 直接拖拽任务条调整日期

**当前问题**：修改任务日期需要打开弹窗，操作路径长。

**优化方案**：

| 操作 | 效果 |
|:----:|:----:|
| 拖拽任务条整体 | 平移任务日期 |
| 拖拽任务条左边缘 | 调整开始日期 |
| 拖拽任务条右边缘 | 调整结束日期 |

**视觉反馈**：
- 拖拽时显示日期预览
- 拖拽完成后自动保存并显示 Toast

---

#### 3.8 右键上下文菜单

**优化方案**：
右键点击任务时显示快捷菜单：
- ✏️ 编辑任务
- 📋 复制任务
- 🗑️ 删除任务
- ➕ 添加子任务
- 🔗 添加依赖
- 📊 更改状态
- 👤 更改负责人

---

#### 3.9 时间轴高亮标记

**优化方案**：
- **今日标记**：用红色竖线标记今天位置
- **里程碑标记**：用菱形图标标记关键节点
- **自定义标记**：支持用户添加备注标记

```
      ↓ 今天
═══════╬═══════════════════════════
       │
       ▼ 当前日期竖线标记
```

---

#### 3.10 搜索和筛选任务

**优化方案**：
在工具栏添加搜索框，支持：
- 按任务名称搜索
- 按负责人筛选
- 按状态筛选（进行中/已完成/逾期）
- 按优先级筛选

匹配的任务高亮显示，其他任务降低透明度。

---

## 4. 优先级总结

| 优先级 | 功能 | 用户价值 | 实现难度 |
|:------:|:----:|:--------:|:--------:|
| P0 | 独立缩放 | ⭐⭐⭐⭐⭐ | 中 |
| P0 | 拖拽平移 | ⭐⭐⭐⭐⭐ | 中 |
| P1 | 回到今天 | ⭐⭐⭐⭐ | 低 |
| P1 | 视图切换 | ⭐⭐⭐⭐ | 中 |
| P1 | 迷你地图 | ⭐⭐⭐ | 高 |
| P2 | 悬停 Tooltip | ⭐⭐⭐⭐ | 低 |
| P2 | 直接拖拽调整 | ⭐⭐⭐⭐⭐ | 高 |
| P2 | 右键菜单 | ⭐⭐⭐ | 中 |
| P2 | 今日标记线 | ⭐⭐⭐ | 低 |
| P2 | 搜索筛选 | ⭐⭐⭐⭐ | 中 |

---

## 5. 竞品参考

| 功能 | Microsoft Project | Asana | Monday.com | Jira |
|:----:|:-----------------:|:-----:|:----------:|:----:|
| 独立缩放 | ✅ | ✅ | ✅ | ✅ |
| 拖拽平移 | ✅ | ✅ | ✅ | ✅ |
| 视图切换 | ✅ | ✅ | ✅ | ✅ |
| 直接拖拽调整 | ✅ | ✅ | ✅ | ✅ |
| 迷你地图 | ✅ | ❌ | ❌ | ❌ |
| 今日标记 | ✅ | ✅ | ✅ | ✅ |

> 💡 **结论**：独立缩放、拖拽平移、视图切换是行业标准功能，缺失会显著降低产品竞争力。

---

## 6. 建议实施路线

### 第一期（1-2周）- 基础导航优化
- [x] 表格/甘特图宽度调节（已完成）
- [x] 甘特图区域拖拽平移（已完成 - 2026-01-17）
- [x] 回到今天按钮（已完成）
- [x] 今日标记竖线（已完成）

### 第二期（2-3周）- 缩放与视图
- [x] 独立缩放控件（+/-按钮、滑块）（已完成）
- [x] Ctrl+滚轮缩放（已完成）
- [x] 日/周/月视图切换（已完成）

### 第三期（3-4周）- 交互增强
- [x] 悬停 Tooltip（已完成 - 2026-01-17）
- [x] 直接拖拽调整任务日期（已完成 - DHTMLX 内置）
- [ ] 右键上下文菜单

### 第四期（可选）- 高级功能
- [ ] 迷你地图
- [ ] 搜索和筛选
- [ ] 自定义时间轴标记

---

## 7. 附录

### 当前界面截图

![甘特图当前界面](file:///C:/Users/24408/.gemini/antigravity/brain/541b8509-4645-42b0-afb1-dd9d4e3aba3d/.system_generated/click_feedback/click_feedback_1768056793319.png)

### 技术栈说明
- 当前使用 dhtmlx-gantt 库
- 大部分优化功能可通过 DHTMLX Gantt API 实现
- 部分功能（如迷你地图）需要自定义开发
