# 测试用例文档（Test Case Document）

## 1. 测试概述
- **测试对象**：甘特图UX优化功能
- **需求来源**：PRD-甘特图UX优化-已完成.md
- **测试目标**：验证所有UX优化功能按需求正确实现
- **测试范围**：异常弹窗自动关闭、空格键拖动导航、快捷键和图例说明、工具栏按钮优化、Excel导入导出

## 2. 测试环境
- **浏览器**：Chromium (Playwright driver)
- **分辨率**：1280x720
- **依赖条件**：Vite开发服务器 (localhost:5273)

## 3. 测试用例

### 3.1 异常弹窗自动关闭功能测试

| 用例编号 | 用例名称 | 前置条件 | 测试步骤 | 预期结果 | 优先级 |
|:--------:|:--------:|:--------:|:--------:|:--------:|:--------:|
| TC-001 | 成功Toast自动关闭 | 页面正常加载 | 触发成功操作（如双击任务取消编辑） | 成功Toast 2秒后自动消失 | P1 |
| TC-002 | 错误Toast自动关闭 | 页面正常加载 | 触发错误操作 | 错误Toast 3秒后自动消失 | P1 |
| TC-003 | Toast手动关闭 | Toast显示中 | 点击Toast关闭按钮 | Toast立即关闭 | P1 |

### 3.2 空格键拖动导航功能测试

| 用例编号 | 用例名称 | 前置条件 | 测试步骤 | 预期结果 | 优先级 |
|:--------:|:--------:|:--------:|:--------:|:--------:|:--------:|
| TC-004 | 空格键启用拖动模式 | 页面正常加载 | 按下空格键 | gantt容器添加space-drag-mode类 | P0 |
| TC-005 | 空格+拖动平移视图 | 按住空格键 | 鼠标拖动 | 视图左右平移 | P0 |
| TC-006 | 释放空格恢复正常模式 | 空格键按下 | 释放空格键 | 移除space-drag-mode类 | P0 |
| TC-007 | 输入框空格不触发 | 焦点在输入框 | 按下空格键 | 空格正常输入，不触发拖动 | P1 |

### 3.3 快捷键和图例面板测试

| 用例编号 | 用例名称 | 前置条件 | 测试步骤 | 预期结果 | 优先级 |
|:--------:|:--------:|:--------:|:--------:|:--------:|:--------:|
| TC-008 | 快捷键面板可见 | 页面正常加载 | 观察左下角 | 快捷键帮助面板可见 | P1 |
| TC-009 | 面板折叠/展开 | 面板可见 | 点击面板标题 | 面板内容折叠/展开 | P1 |
| TC-010 | 快捷键内容正确 | 面板展开 | 查看内容 | 包含导航、任务操作、图例说明 | P2 |

### 3.4 工具栏按钮优化测试

| 用例编号 | 用例名称 | 前置条件 | 测试步骤 | 预期结果 | 优先级 |
|:--------:|:--------:|:--------:|:--------:|:--------:|:--------:|
| TC-011 | 主要按钮可见 | 页面正常加载 | 观察工具栏 | 编辑字段、编辑模式、今天按钮可见 | P1 |
| TC-012 | 更多操作下拉菜单 | 页面正常加载 | 点击"更多操作"按钮 | 显示下拉菜单 | P1 |
| TC-013 | 下拉菜单内容 | 菜单展开 | 查看菜单项 | 包含视图切换、导入导出选项 | P1 |
| TC-014 | 点击外部关闭菜单 | 菜单展开 | 点击菜单外部区域 | 菜单自动关闭 | P1 |
| TC-015 | 缩放控件功能 | 页面正常加载 | 点击放大/缩小按钮 | 视图级别正确切换 | P0 |
| TC-016 | 视图选择器功能 | 页面正常加载 | 选择不同视图级别 | 视图显示级别正确更新 | P0 |

### 3.5 Excel导入导出测试

| 用例编号 | 用例名称 | 前置条件 | 测试步骤 | 预期结果 | 优先级 |
|:--------:|:--------:|:--------:|:--------:|:--------:|:--------:|
| TC-017 | Excel导出按钮可用 | 页面正常加载 | 点击更多操作 -> 导出Excel | 触发Excel下载 | P0 |
| TC-018 | 导出Excel内容完整 | 有任务数据 | 执行导出，打开Excel | 包含所有任务和自定义字段列 | P0 |
| TC-019 | Excel导入按钮可用 | 页面正常加载 | 点击更多操作 -> 导入Excel | 显示文件选择对话框 | P0 |
| TC-020 | 导入有效Excel文件 | 准备好测试Excel | 选择并导入Excel文件 | 任务数据正确导入甘特图 | P0 |
| TC-021 | JSON导出保留 | 页面正常加载 | 点击更多操作 -> 导出JSON | 触发JSON下载 | P1 |
| TC-022 | JSON导入保留 | 页面正常加载 | 点击更多操作 -> 导入JSON | 显示文件选择对话框 | P1 |

### 3.6 边界测试

| 用例编号 | 用例名称 | 前置条件 | 测试步骤 | 预期结果 | 优先级 |
|:--------:|:--------:|:--------:|:--------:|:--------:|:--------:|
| TC-B01 | 最大缩放级别限制 | 当前为日视图 | 连续点击放大按钮 | 达到日视图后放大按钮禁用 | P2 |
| TC-B02 | 最小缩放级别限制 | 当前为年视图 | 连续点击缩小按钮 | 达到年视图后缩小按钮禁用 | P2 |
| TC-B03 | 快速连续空格拖动 | 页面正常加载 | 快速按下释放空格并拖动 | 状态正确切换，无异常 | P2 |

### 3.7 异常测试

| 用例编号 | 用例名称 | 前置条件 | 测试步骤 | 预期结果 | 优先级 |
|:--------:|:--------:|:--------:|:--------:|:--------:|:--------:|
| TC-E01 | 导入无效Excel格式 | 准备无效文件 | 导入非Excel文件 | 显示错误提示 | P1 |
| TC-E02 | 导入缺少必填列Excel | 准备缺列的Excel | 导入该Excel文件 | 显示错误提示，指明缺失列 | P1 |

## 4. 测试数据
- **正常数据**：包含完整列的Excel文件，有效的任务数据
- **边界数据**：最大/最小缩放级别、大量任务数据
- **异常数据**：格式错误的文件、缺失必填列的Excel
